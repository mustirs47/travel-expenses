:root{
  font-family:'Inter', system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
  --gap:12px;
  --border-radius:10px;
  --shadow:0 8px 28px rgba(12,20,40,.06);
  --primary:#0f62fe;
  --primary-dark:#0a4bd8;
  --muted:#f1f4ff;
  --muted-border:#d7def0;
  --muted-headers:#e9ecef;
  --danger:#ff3b3b;
  --text:#111;
  --bg:#f5f7fb;
  --card-bg:#fff;
  --input-bg:#fff;
  --input-border:#dde3f0;
  --table-border:#c8d2e6;
  --row-hover:#f5f7fb;
  --warning:#ffdddd;
}

/* Dark mode */
@media (prefers-color-scheme: dark) {
  :root{
    --primary:#7aa2ff;
    --primary-dark:#598dff;
    --muted:#0f1720;
    --muted-border:#203147;
    --muted-headers:#0f1a26;
    --danger:#ff6b6b;
    --text:#e6eef8;
    --bg:#0b1220;
    --card-bg:#08101a;
    --input-bg:#08141f;
    --input-border:#183047;
    --table-border:#183047;
    --row-hover:#071824;
    --warning:#5a1b1b;
  }
}

/* Mobile: wirklich Vollbild */
@media (max-width: 768px) {
  .page {
    padding: 0;
  }
  .card {
    width: 100%;
    max-height: 100dvh;
    border-radius: 0;
  }
}

html,body{height:100%}
body{
  margin:0;
  * { box-sizing: border-box }
  background:var(--bg);
  color:var(--text);
  -webkit-text-size-adjust:100%;
  overflow:hidden;
  overflow-x:hidden; /* ABSOLUTE overflow stop */
  padding: env(safe-area-inset-top) env(safe-area-inset-right)
           env(safe-area-inset-bottom) env(safe-area-inset-left);
}

html, body, #root {
  height: 100%;
}

/* Centered page */
.page{
  min-height:100dvh;
  display:flex;
  justify-content:center;
  align-items:stretch;
  padding: 16px;
  overflow-x:hidden;
}
.card{
  width: min(1400px, 100%);   /* nutzt mehr Screen */
  background: var(--card-bg);
  padding: 24px;
  border-radius: var(--border-radius);
  box-shadow: var(--shadow);
  display:flex;
  flex-direction:column;
  overflow: auto;
  max-height: calc(100dvh - 32px);
  -webkit-overflow-scrolling: touch;
}

/* Headings */
.h1{
  font-size:22px;
  margin:0 0 16px 0;
}

/* Row / Field grid */
.row{
  display:flex;
  gap:var(--gap);
  flex-wrap:wrap;
}
.field{
  flex:1 1 220px;
  min-width:160px;
}
label{
  display:block;
  font-size:13px;
  margin-bottom:6px;
  font-weight:600;
}

/* Inputs */
.input, .select, .textarea{
  width:100%;
  height:44px;
  padding:10px 12px;
  font-size:14px;
  border-radius:8px;
  border:1px solid var(--input-border);
  background:var(--input-bg);
  color:var(--text);
  outline:none;
  line-height:1.2;
  -webkit-appearance:none;
  appearance:none;
}
.input:focus, .select:focus, .textarea:focus{
  border-color:var(--primary);
  box-shadow:0 0 0 3px rgba(15,98,254,0.12);
}

/* Buttons */
.actions{
  display:flex;
  gap:var(--gap);
  flex-wrap:wrap;
  align-items:center;
}
.btn{
  padding:10px 16px;
  font-size:14px;
  border-radius:8px;
  cursor:pointer;
  border:0;
  transition:all .12s;
}
.btn:hover{opacity:0.96}
.btn:disabled{opacity:0.6; pointer-events: none; cursor:not-allowed}
.btn-primary{background:var(--primary-dark);color:#fff;font-weight:800}
.btn-muted{background:transparent;color:var(--text);border:1px solid var(--input-border);font-weight:700}
.btn-danger{background:var(--danger);color:#fff;font-weight:900}

/* Icon buttons */
.iconbar{display:flex; gap:8px; align-items:center}
.ibtn{
  height:40px;
  width:40px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:0;
  line-height:0;
}
.ibtn:hover{filter:brightness(1.05)}
.ibtn:disabled{opacity:.5; cursor:not-allowed}
.ibtn-danger{border-color: rgba(255,0,0,.35)}
.ibtn svg{width:18px;height:18px}

/* Layout (Trips page) */
.layout{
  display:grid;
  grid-template-columns: 360px 1fr;
  gap:16px;
  width:100%;
  min-width:0;
}
.panel{
  border:1px solid var(--table-border);
  border-radius:8px;
  padding:12px;
  background:var(--card-bg);
  min-width:0; /* critical for grid overflow */
  overflow:hidden;
}
.triprow{
  display:flex;
  gap:10px;
  align-items:stretch;
}
.tripmain{
  flex:1;
  min-width:0;
  text-align:left;
  padding:10px;
  border-radius:8px;
  border:1px solid var(--input-border);
  background:transparent;
  color:var(--text);
  cursor:pointer;
  overflow:hidden;
}
.tripmain .title{
  font-weight:900;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.tripmeta{font-size:12px; opacity:.75; margin-top:2px}
.triprow.active .tripmain{border:2px solid var(--primary)}
.tripdel{min-width:44px;padding:10px 12px}

/* Table wrapper */
.table-wrap{
  margin-top:16px;
  border:1px solid var(--table-border);
  border-radius:8px;
  background:var(--card-bg);
  overflow-x:auto;            /* only place where horizontal scroll is allowed */
  -webkit-overflow-scrolling: touch;
}
.table{
  width:100%;
  border-collapse:collapse;
  table-layout:fixed;         /* key: prevents random expansion */
  min-width:980px;            /* stable desktop baseline */
}
.th,.td{
  padding:10px 12px;
  text-align:left;
  vertical-align:middle;
  border-bottom:1px solid rgba(0,0,0,0.04);
  font-size:14px;
}
.th{
  background:var(--muted-headers);
  font-weight:900;
  border-bottom:1px solid var(--table-border);
}
.tr:hover{background:var(--row-hover); transition:.12s}
.numcol{text-align:center; font-weight:900}

/* Inputs inside table */
.tinput, .tselect{
  width:100%;
  height:40px;
  padding:8px 10px;
  font-size:14px;
  border-radius:6px;
  border:1px solid var(--input-border);
  background:var(--input-bg);
  color:var(--text);
  outline:none;
}
.tinput:focus, .tselect:focus{
  border-color:var(--primary);
  box-shadow:0 0 0 3px rgba(15,98,254,0.12);
}
.tnum{ text-align:right; }

/* totals */
.totals{
  display:flex;
  flex-direction:column;
  align-items:flex-end;
  gap:4px;
  margin-top:8px;
}
.totalbar{
  display:flex;
  justify-content:flex-end;
  align-items:center;
  gap:16px;
  margin-top:10px;
  font-size:16px;
}
.totalbar strong{font-weight:950}

/* Mobile */
@media(max-width:900px){
  .layout{grid-template-columns: 1fr;}
  .card{padding:16px;}
  .field{flex:1 1 140px}
  .table{min-width:1060px;}     /* scroll inside wrapper, not page */
  .tinput,.tselect{height:44px; font-size:16px;} /* iOS zoom prevention, better tap targets */
  .btn{padding:12px 14px}
}

/* VIEWPORT LAYOUT: keep UI inside screen, scroll inside card */
.page{
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center; /* echtes Center */
  padding:20px;
}
.card.auth{
  max-width:520px;
  width:min(520px, 100%);
}

.card{
  max-height: calc(100vh - 40px);
  overflow: auto; /* vertical scrolling INSIDE card */
}

/* keep table header readable while scrolling (optional) */
.th{
  position: sticky;
  top: 0;
  z-index: 1;
}
@media(min-width: 901px){
  .table{ min-width: 0; } /* Desktop: fit to container */
}
/* Import loading overlay */
.loading-overlay{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.55);
  display: grid;
  place-items: center;
  z-index: 9999;
  pointer-events: auto;
}
.loading-card{
  width: min(420px, 92vw);
  background: var(--card-bg);
  border-radius: 12px;
  padding: 18px;
  border: 1px solid var(--table-border);
  box-shadow: var(--shadow);
}
.spinner{
  width: 28px;
  height: 28px;
  border-radius: 999px;
  border: 3px solid rgba(255,255,255,0.15);
  border-top-color: var(--primary);
  animation: spin 0.9s linear infinite;
}
@keyframes spin{
  to{ transform: rotate(360deg);}
}

/* Center everything */
.page{
  min-height: 100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  padding: 16px;
}

/* Card sizes */
.card{
  width: min(1400px, 100%);
  max-height: calc(100vh - 32px);
  overflow:auto;
}

/* Auth should not be giant */
.auth-card{
  width: min(560px, 100%);
}

/* When logged in, allow full app width */
.auth-card:has(.layout){
  width: min(1400px, 100%);
}

/* Amplify Auth UI -> match your inputs/buttons */
.auth-card .amplify-authenticator,
.auth-card .amplify-card{
  background: transparent !important;
  box-shadow: none !important;
  border: 0 !important;
}

.auth-card .amplify-field__control input{
  height: 44px !important;
  border-radius: 8px !important;
  border: 1px solid var(--input-border) !important;
  background: var(--input-bg) !important;
  color: var(--text) !important;
}

.auth-card .amplify-button--primary{
  background: var(--primary-dark) !important;
  border-radius: 8px !important;
  font-weight: 700 !important;
}

.auth-card .amplify-button--link{
  color: var(--text) !important;
  opacity: .85 !important;
}

body{
  padding: env(safe-area-inset-top) env(safe-area-inset-right)
           env(safe-area-inset-bottom) env(safe-area-inset-left);
}

/* iOS Safari date input styling normalisieren */
.tinput.tdate {
  height: 40px;
  padding: 10px 12px;
  border-radius: 8px;
  border: 1px solid var(--input-border);
  background: var(--input-bg);
  color: var(--text);
  font-size: 14px;
  line-height: 1.2;
  width: 100%;
  box-sizing: border-box;

  -webkit-appearance: none;
  appearance: none;
}

/* iOS: Kalender-Icon nicht “extra spacing” erzeugen */
.tinput.tdate::-webkit-calendar-picker-indicator {
  opacity: 0.8;
  margin: 0;
  padding: 0;
}

/* iOS autofill / focus */
.tinput.tdate:focus {
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(15, 98, 254, 0.12);
  outline: none;
}

.appShell{
  height: 100vh;
  width: 100%;
  display: grid;
  grid-template-columns: 360px minmax(0, 1fr);
  gap: 16px;
  padding: 20px;
  max-width: 1600px;
  margin: 0 auto;
}

.sidebar{
  min-width: 0;
}

.main{
  min-width: 0;        /* WICHTIG: verhindert “Main schrumpft auf 5px” */
  width: 100%;
}